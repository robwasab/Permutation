<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="generator" content="HTML Tidy, see www.w3.org">
<title>widget_validator - widget::validator behaviour</title>
<meta name='Author' content='ActiveState'>
<link rel='stylesheet' type='text/css' href='../../aspn.css'>
</head>
<body>
<div class="doctools">
<div class="banner">
<table width="100%" border="0" cellspacing="0" cellpadding="3">
<tr>
<td align="left"><a target="_blank" href=
"http://www.activestate.com/activetcl"><img src=
"../../images/ActiveTcl.gif" border="0" align="left" alt=
"ActiveTcl"></a> </td>
<td align="center" class="heading">ActiveTcl User Guide</td>
<td align="right"><a target="_blank" href=
"http://www.activestate.com"><img src="../../images/AS_logo.gif"
border="0" align="right" alt="ActiveState Software Inc."></a> </td>
</tr>
</table>
</div>

<hr>
[ <a href="../../at.pkg_index.html">Main table Of Contents</a> | <a
href="../toc.html">Tklib Table Of Contents</a> | <a href=
"../index.html">Tklib Index</a> ] 

<hr>
<h1 class="title">widget_validator(n) 0.1 "widget::validator
behaviour"</h1>

<div id="name" class="section">
<h2><a name="name">Name</a></h2>

<p>widget_validator - widget::validator behaviour</p>
</div>

<div id="toc" class="section">
<h2><a name="toc">Table Of Contents</a></h2>

<ul class="toc">
<li class="section"><a href="#toc">Table Of Contents</a></li>

<li class="section"><a href="#synopsis">Synopsis</a></li>

<li class="section"><a href="#section1">Description</a></li>

<li class="section"><a href="#section2">Validation</a></li>

<li class="section"><a href="#section3">Example</a></li>

<li class="section"><a href="#keywords">Keywords</a></li>
</ul>
</div>

<div id="synopsis" class="section">
<h2><a name="synopsis">Synopsis</a></h2>

<div class="synopsis">
<ul class="requirements">
<li>package require <b class="pkgname">Tcl 8.5</b></li>

<li>package require <b class="pkgname">Tk 8.5</b></li>

<li>package require <b class="pkgname">widget::validator <span
class="opt">?0.1?</span></b></li>
</ul>

<ul class="syntax">
<li><a href="#1"><b class="cmd">widget::validator</b> <b class=
"method">attach</b> <i class="arg">w</i> <i class="arg">color</i>
<i class="arg">cmdprefix</i></a></li>

<li><a href="#2"><b class="cmd">widget::validator</b> <b class=
"method">detach</b> <i class="arg">w</i></a></li>

<li><a href="#3"><b class="cmd">widget::validator</b> <b class=
"method">validate</b> <i class="arg">w</i></a></li>
</ul>
</div>
</div>

<div id="section1" class="section">
<h2><a name="section1">Description</a></h2>

<p>This package provides a unified validation API for <b class=
"package">ttk</b>'s entry and combobox widgets.</p>

<p>Please note that the validation behaviour defined in this
package will not reject invalid edits. It will only highlight the
entry containing invalid data and set the proper state flag.</p>

<p>It is the responsibility of the using package or application to
decide how and when to actually reject such invalid content.</p>

<dl class="definitions">
<dt><a name="1"><b class="cmd">widget::validator</b> <b class=
"method">attach</b> <i class="arg">w</i> <i class="arg">color</i>
<i class="arg">cmdprefix</i></a></dt>

<dd>
<p>This method adds a validating behaviour to the widget <i class=
"arg">w</i>.</p>

<p>Whenever the content of the widget's entry field changes the
specified <i class="arg">cmdprefix</i> is invoked and has to return
a boolean value, where <b class="const">true</b> means that content
is ok, and <b class="const">false</b> that the content is invalid.
For more information on the command prefix see section <span class=
"sectref"><a href="#section2">Validation</a></span>. In case of the
latter the background color of the entry field is changed to <i
class="arg">color</i> to indicate the invalidity.</p>

<p>The system does not support nesting of validators on a widget,
nor the attachment of multiple validators. To change validating
conditions <b class="method">detach</b> the current validator first
before attaching the new.</p>

<p>An error is thrown if the widget has already validating
behaviour attached to it.</p>

<p>The result of the method is the empty string.</p>

<p>To achieve its aims the package overrides various configuration
options of the widget the behaviour is attached to. These options
are restored to their previous values on <b class=
"method">detach</b>.</p>

<p>If other behaviours are attached the validator may be rendered
temporarily (partially) non-functional. Similarly, if the validator
is detached while a different behaviour is also attached its
restoration of configuration settings may render the other
non-functional</p>
</dd>

<dt><a name="2"><b class="cmd">widget::validator</b> <b class=
"method">detach</b> <i class="arg">w</i></a></dt>

<dd>
<p>This method removes the validating behaviour from the widget <i
class="arg">w</i> and restores it to its original state.</p>

<p>An error is thrown if the widget has no validating behaviour
attached to it.</p>

<p>The result of the method is the empty string.</p>
</dd>

<dt><a name="3"><b class="cmd">widget::validator</b> <b class=
"method">validate</b> <i class="arg">w</i></a></dt>

<dd>
<p>Invoking this method forces a validation of the widget <i class=
"arg">w</i>, assuming that it has a validator behaviour attached to
it.</p>

<p>The result of the method is the empty string.</p>
</dd>
</dl>
</div>

<div id="section2" class="section">
<h2><a name="section2">Validation</a></h2>

<p>The command prefix for used for validation has to have the
following signature:</p>

<dl class="definitions">
<dt>{*}<i class="arg">cmdprefix</i> <i class="arg">text</i></dt>

<dd>
<p>The argument is the text to validate.</p>

<p>The result of the callback has to be a boolean value where <b
class="const">true</b> means that <i class="arg">text</i> is ok,
and <b class="const">false</b> that <i class="arg">text</i> is
invalid.</p>
</dd>
</dl>
</div>

<div id="section3" class="section">
<h2><a name="section3">Example</a></h2>

<pre class="example">
package require Tk 8.5
package require widget::validator
set TE {}
set TC {}
ttk::entry    .e -textvariable TE
ttk::combobox .c -textvariable TC -values {fruit vegetable corn}
ttk::combobox .n -values {fruit vegetable corn}
ttk::button   .x -command ::exit -text Exit
pack .e -expand 1 -fill both -side top
pack .c -expand 1 -fill both -side top
pack .n -expand 1 -fill both -side top
pack .x -expand 1 -fill both -side top
widget::validator attach .e lightblue {apply {text {
    expr {$text ne {}}
}}}
widget::validator attach .c yellow {apply {text {
    expr {$text ni {{} hello world}}
}}}
widget::validator attach .n pink {apply {text {
    expr {$text ni {{} blub}}
}}}
</pre>
</div>

<div id="keywords" class="section">
<h2><a name="keywords">Keywords</a></h2>

<p><a href="../index.html#key66">invalid</a>, <a href=
"../index.html#key114">state management</a>, <a href=
"../index.html#key125">ttk::combobox</a>, <a href=
"../index.html#key126">ttk::entry</a>, <a href=
"../index.html#key127">validation</a>, <a href=
"../index.html#key132">widget validation</a></p>
</div>

<h4>Copyright &copy; 2012 <a href="http://www.activestate.com">for
compilation: ActiveState</a></h4>
</div>
</body>
</html>

